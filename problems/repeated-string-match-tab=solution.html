<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="Given two strings A and B, find the minimum number of times A has to be repeated such that B is a substring of it. If no such solution, return -1.

For example, with A = &#34;abcd&#34; and B = &#34;cdabcdab&#34;. 

Return 3, because by repeating A three times (“abcdabcdabcd”), B is a substring of it; and B is not a substring of A repeated two times (&#34;abcdabcd&#34;).

Note:
The length of A and B will be between 1 and 10000.">
  <meta name="keywords"
        content="Repeated String Match, LC 686, leetcode 686, leaked interview questions, hackerank free, bittiger free"/>



  <meta name="author" content="">
  <link rel="icon" href="../favicon.ico">

  <title>LeetFree - Leaked Interview questions from Google Facebook Amazon Microsoft LinkedIn</title>

  <!-- Bootstrap core CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

  <link href="https://use.fontawesome.com/releases/v5.0.1/css/all.css" rel="stylesheet">

  <!-- <link href="/css/fontawesome-all.min.css" rel="stylesheet"> -->
  <!-- <link href="/css/open-iconic-bootstrap.min.css" rel="stylesheet"> -->

  <!-- DataTable -->
  <!-- <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/css/bootstrap.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css" rel="stylesheet"> -->

  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet"/>
  <!--<link href="/css/codemirror.css" rel="stylesheet">-->

  <style type="text/css">.CodeMirror {
      border: 1px solid gray;
      height: 100%;
    }
  </style>



  <!-- Custom styles for this template -->
  <link href="../maincss.css" rel="stylesheet">


  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111377072-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];

      function gtag() {
          dataLayer.push(arguments);
      }

      gtag('js', new Date());

      gtag('config', 'UA-111377072-1');
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-8728288618103299",
      enable_page_level_ads: true
    });
  </script>

  <!-- Baidu Analytics -->









</head>

<body>

<div class="blog-masthead">
  <div class="container">
    <nav class="blog-nav">
      <a class="blog-nav-item" href="../index.html">All Questions</a>
      <a class="blog-nav-item" href="../company/google.html">Google</a>
      <a class="blog-nav-item" href="../company/facebook.html">Facebook</a>
      <a class="blog-nav-item" href="../company/microsoft.html">Microsoft</a>
      <a class="blog-nav-item" href="../company/amazon.html">Amazon</a>
      <a class="blog-nav-item" href="../company/uber.html">Uber</a>
      <a class="blog-nav-item" href="../company/linkedin.html">LinkedIn</a>
      <a class="blog-nav-item" href="../company/twitter.html">Twitter</a>
      <a class="blog-nav-item" href="../company/airbnb.html">Airbnb</a>
      <a class="blog-nav-item" href="../company/snapchat.html">Snapchat</a>
    </nav>
  </div>
</div>

<div class="container">
  

  <div class="blog-header">
    <div class="alert alert-info" role="alert">This website contains ALL LeetCode <b>Premium</b> <i
            class="fas fa-unlock-alt"></i> problems for
      <b>FREE!!</b>.<br/>
      All leaked interview problems are collected from Internet.
    </div>

    <h2>686. Repeated String Match</h2>
  </div>

  <div class="row">
    <div class="col-md-9 blog-main">
      <div>
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist" id="myTabs">
          <li role="presentation" class="active" id="question-li"><a href="#question" aria-controls="question"
                                                                     role="tab"
                                                                     data-toggle="tab">Question</a>
          </li>
          <li role="presentation" id="solution-li"><a href="#solution" aria-controls="solution" role="tab"
                                                      data-toggle="tab"><i class="fas fa-unlock-alt"></i> Solution</a>
          </li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">

          <div role="tabpanel" class="tab-pane active" id="question">
            <br/>
            <p>Given two strings A and B, find the minimum number of times A has to be repeated such that B is a substring of it. If no such solution, return -1.</p>

<p>
For example, with A = "abcd" and B = "cdabcdab". </p>

<p>
Return 3, because by repeating A three times (“abcdabcdabcd”), B is a substring of it; and B is not a substring of A repeated two times ("abcdabcd").
</p>

<p><b>Note:</b><br />
The length of <code>A</code> and <code>B</code> will be between 1 and 10000.
</p>
          </div>
          <div role="tabpanel" class="tab-pane" id="solution">
            <br/>
            <div class="block-markdown">
<div class="toc">
<ul>
<li><a href="#approach-1-ad-hoc-accepted">Approach #1: Ad-Hoc [Accepted]</a></li>
<li><a href="#approach-2-rabin-karp-rolling-hash-accepted">Approach #2: Rabin-Karp (Rolling Hash) [Accepted]</a></li>
</ul>
</div>
<h4 id="approach-1-ad-hoc-accepted">Approach #1: Ad-Hoc [Accepted]</h4>
<p><strong>Intuition</strong></p>
<p>The question can be summarized as "What is the smallest <code>k</code> for which <code>B</code> is a substring of <code>A * k</code>?"  We can just try every <code>k</code>.</p>
<p><strong>Algorithm</strong></p>
<p>Imagine we wrote <code>S = A+A+A+...</code>.  If <code>B</code> is to be a substring of <code>S</code>, we only need to check whether some <code>S[0:], S[1:], ..., S[len(A) - 1:]</code> starts with <code>B</code>, as <code>S</code> is long enough to contain <code>B</code>, and <code>S</code> has period at most <code>len(A)</code>.</p>
<p>Now, suppose <code>q</code> is the least number for which <code>len(B) &lt;= len(A * q)</code>.  We only need to check whether <code>B</code> is a substring of <code>A * q</code> or <code>A * (q+1)</code>.  If we try <code>k &lt; q</code>, then <code>B</code> has larger length than <code>A * q</code> and therefore can't be a substring.  When <code>k = q+1</code>, <code>A * k</code> is already big enough to try all positions for <code>B</code>; namely, <code>A[i:i+len(B)] == B</code> for <code>i = 0, 1, ..., len(A) - 1</code>.</p>
<iframe frameborder="0" height="224" name="gTtmgvev" src="https://leetcode.com/playground/gTtmgvev/shared" width="100%"></iframe>
<p><strong>Complexity Analysis</strong></p>
<ul>
<li>
<p>Time Complexity: <script type="math/tex; mode=display">O(N*(N+M))</script>, where <script type="math/tex; mode=display">M, N</script> are the lengths of strings <code>A, B</code>.  We create two strings <code>A * q</code>, <code>A * (q+1)</code> which have length at most <code>O(M+N)</code>.  When checking whether <code>B</code> is a substring of <code>A</code>, this check takes naively the product of their lengths.</p>
</li>
<li>
<p>Space complexity: As justified above, we created strings that used <script type="math/tex; mode=display">O(M+N)</script> space.</p>
</li>
</ul>
<hr/>
<h4 id="approach-2-rabin-karp-rolling-hash-accepted">Approach #2: Rabin-Karp (Rolling Hash) [Accepted]</h4>
<p><strong>Intuition</strong></p>
<p>As in <em>Approach #1</em>, we've reduced the problem to deciding whether B is a substring of some <code>A * k</code>.  Using the following technique, we can decide whether <code>B</code> is a substring in <script type="math/tex; mode=display">O(len(A) * k)</script> time.</p>
<p><strong>Algorithm</strong></p>
<p>For strings <script type="math/tex; mode=display">S</script>, consider each <script type="math/tex; mode=display">S[i]</script> as some integer ASCII code.  Then for some prime <script type="math/tex; mode=display">p</script>, consider the following function modulo some prime modulus <script type="math/tex; mode=display">\mathcal{M}</script>:</p>
<p>
<script type="math/tex; mode=display">\text{hash}(S) = \sum_{0 \leq i < len(S)} p^i * S[i]</script>
</p>
<p>Notably, <script type="math/tex; mode=display">\text{hash}(S[1:] + x) = \frac{(\text{hash}(S) - S[0])}{p} + p^{n-1} x</script>.  This shows we can get the hash of every substring of <code>A * q</code> in time complexity linear to it's size.  (We will also use the fact that <script type="math/tex; mode=display">p^{-1} = p^{\mathcal{M}-2} \mod \mathcal{M}</script>.)</p>
<p>However, hashes may collide haphazardly.  To be absolutely sure in theory, we should check the answer in the usual way.  The expected number of checks we make is in the order of <script type="math/tex; mode=display">1 + \frac{s}{\mathcal{M}}</script> where <script type="math/tex; mode=display">s</script> is the number of substrings we computed hashes for (assuming the hashes are equally distributed), which is effectively 1.</p>
<iframe frameborder="0" height="515" name="DKSFgXSr" src="https://leetcode.com/playground/DKSFgXSr/shared" width="100%"></iframe>
<p><strong>Complexity Analysis</strong></p>
<ul>
<li>
<p>Time Complexity: <script type="math/tex; mode=display">O(M+N)</script> (at these sizes), where <script type="math/tex; mode=display">M, N</script> are the lengths of strings <code>A, B</code>.  As in <em>Approach #1</em>, we justify that <code>A * (q+1)</code> will be of length <script type="math/tex; mode=display">O(M + N)</script>, and computing the rolling hashes was linear work.  We will also do a linear <script type="math/tex; mode=display">O(N)</script> final check of our answer <script type="math/tex; mode=display">1 + O(M) / \mathcal{M}</script> times.  In total, this is <script type="math/tex; mode=display">O(M+N + N(1 + \frac{M}{\mathcal{M}}))</script> work.  Since <script type="math/tex; mode=display">M \leq 10000 < \mathcal{M} = 10^9 + 7</script>, we can consider this to be linear behavior.</p>
</li>
<li>
<p>Space complexity:  <script type="math/tex; mode=display">O(1)</script>.  Only integers were stored with additional memory.</p>
</li>
</ul>
<hr/>
<p>Analysis written by: <a href="https://leetcode.com/awice">@awice</a></p>
</div>
          </div>
        </div>
      </div>

    </div>

    <aside class="col-md-3  blog-sidebar">
      <div class="row sidebar-module">
        <ul class="list-group">
          <li class="list-group-item"><span>Difficulty:</span><span class="pull-right">
                              
                                <button class="btn btn-xs btn-info disabled">Easy</button>
                              
          </span></li>
          <li class="list-group-item"><span>Total Accepted:</span><span class="pull-right">14761</span>
          </li>
          <li class="list-group-item"><span>Total Submissions:</span><span
                  class="pull-right">43074</span></li>

          <li class="list-group-item" style="background: #eee;"><span><i
                  class="fas fa-unlock-alt"></i> Frequency:</span>
            <span class="pull-right">
              39%
            </span>
          </li>
        </ul>
        <ul class="list-group">

          <li class="list-group-item">
            <h4><i class="fas fa-unlock-alt"></i> Companies (leaked): </h4>
            
              <a style="margin:2px" class="btn btn-sm btn-success" href="../company/google.html">Google</a>
            
          </li>

        </ul>
      </div>
    </aside>

  </div>

  <div class="row" >
    <div class="col-md-2">
      <select class="js-example-basic-single" name="state" style="width: 100%;" id="language">
        <option value="cpp">C++</option>
        <option value="py2">Python 2</option>
        <option value="py3">Python 3</option>
      </select>
    </div>
    <div class="col-md-2">

    </div>
  </div>

  <div class="row" >
    <div class="col-md-12 blog-main">
      <div>
        
        <textarea id="code_cpp" name="code_cpp">
          
            
        </textarea>
        
        <textarea id="code_py2" name="code_py2">
          
            
        </textarea>
        
        <textarea id="code_py3" name="code_py3">
          
            
        </textarea>
        
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 blog-main">
      <a href="#" class="btn btn-primary" id="submit">Submit Solution</a>
    </div>
  </div>



</div>
<!-- /.container -->

<footer class="blog-footer">
  <a href="mailto:leetfree@gmail.com">Email: leetfree@gmail.com</a>
  <p class="pull-right"><a href="#">Back to top</a></p>
</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="/assets/js/vendor/jquery.min.js"><\/script>')
</script>
<script src="../js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../assets/js/ie10-viewport-bug-workaround.js"></script>


<!-- DataTable -->
<!-- <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script> -->

<script src="../main.js"></script>





</body>

</html>